syntax = "proto3";

package {{.Package}};

option go_package = "{{.GoPackage}}";

import "google/api/annotations.proto";

service {{.ServiceName}} {
  // Standard HTTP methods
  rpc GetResource(GetResourceRequest) returns (ResourceResponse) {
    option (google.api.http) = {
      get: "/resources/{id}"
    };
  }

  rpc CreateResource(CreateResourceRequest) returns (ResourceResponse) {
    option (google.api.http) = {
      post: "/resources"
      body: "*"
    };
  }

  // Custom HTTP methods using custom pattern
  rpc CheckHealth(HealthRequest) returns (HealthResponse) {
    option (google.api.http) = {
      custom: {
        kind: "HEAD"
        path: "/health"
      }
    };
  }

  rpc GetOptions(OptionsRequest) returns (OptionsResponse) {
    option (google.api.http) = {
      custom: {
        kind: "OPTIONS"
        path: "/resources"
      }
    };
  }

  rpc TraceRequest(TraceRequestMessage) returns (TraceResponse) {
    option (google.api.http) = {
      custom: {
        kind: "TRACE"
        path: "/debug/trace/{request_id}"
      }
    };
  }

  // Custom method with path parameters
  rpc CustomAction(CustomActionRequest) returns (CustomActionResponse) {
    option (google.api.http) = {
      custom: {
        kind: "PURGE"
        path: "/cache/{namespace}/{key}"
      }
    };
  }
}

message GetResourceRequest {
  string id = 1;
}

message CreateResourceRequest {
  string name = 1;
  string value = 2;
}

message ResourceResponse {
  string id = 1;
  string name = 2;
  string value = 3;
}

message HealthRequest {}

message HealthResponse {
  bool healthy = 1;
}

message OptionsRequest {}

message OptionsResponse {
  repeated string allowed_methods = 1;
}

message TraceRequestMessage {
  string request_id = 1;
}

message TraceResponse {
  string trace_data = 1;
}

message CustomActionRequest {
  string namespace = 1;
  string key = 2;
}

message CustomActionResponse {
  bool success = 1;
}
